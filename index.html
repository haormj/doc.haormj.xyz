<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-06-14 五 09:51 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Personnal Document</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Ward Harris" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Personnal Document</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgd30366b">Information</a></li>
<li><a href="#org32cf18a">Computer</a>
<ul>
<li><a href="#org082e43c">CPU</a></li>
<li><a href="#org810dceb">GPU</a></li>
<li><a href="#org4325c2d">CPU/GPU AI</a></li>
<li><a href="#orgc67c793">参考</a></li>
</ul>
</li>
<li><a href="#org0413622">DNS</a>
<ul>
<li><a href="#org897a4a0">通配符域名</a></li>
<li><a href="#orgf253ccf">参考</a></li>
</ul>
</li>
<li><a href="#org080d188">Docker</a>
<ul>
<li><a href="#orgcc35889">ubuntu 安装</a></li>
<li><a href="#org8236f2b">centos 安装</a></li>
<li><a href="#org4127e8a">使用</a></li>
</ul>
</li>
<li><a href="#org4db73d3">ETCD</a>
<ul>
<li><a href="#orgeedfe4a">每次访问 etcd 都会重定向到外网</a></li>
<li><a href="#org2e79cfe">v2.3.4 etcdctl unexpected status code 401</a></li>
<li><a href="#orga61db3a">root 用户, root/guest 角色</a></li>
<li><a href="#org10979b4">参考</a></li>
</ul>
</li>
<li><a href="#orgbdba92e">Linux</a>
<ul>
<li><a href="#orgc430a2c">ab(apache bench)</a></li>
<li><a href="#orge8edd2d">awk</a></li>
<li><a href="#org3467f36">boot</a></li>
<li><a href="#orgcc44904">cgroup</a></li>
<li><a href="#orgf70d328">crontab</a></li>
<li><a href="#org6b4aae6">mtr</a></li>
<li><a href="#org7d986ae">FQA</a></li>
</ul>
</li>
<li><a href="#org516fb14">Performance</a>
<ul>
<li><a href="#org21ae6d8">cpu</a></li>
</ul>
</li>
<li><a href="#org8e39164">Physics</a>
<ul>
<li><a href="#org7a749b4">Stellarium</a></li>
</ul>
</li>
<li><a href="#org7a738e7">Nginx</a>
<ul>
<li><a href="#org3bf8422">FQA</a></li>
</ul>
</li>
<li><a href="#org8fb7eed">Redis</a>
<ul>
<li><a href="#orgb4c76c6">FQA</a></li>
</ul>
</li>
<li><a href="#org61f9d8c">Cryptography</a>
<ul>
<li><a href="#org9eb90d9">FQA</a></li>
</ul>
</li>
<li><a href="#org9ddc9fa">Proxy</a>
<ul>
<li><a href="#orgc97e46e">redsocks</a></li>
<li><a href="#org03de835">kcptun</a></li>
<li><a href="#orgf183f83">shadowsocks</a></li>
<li><a href="#org7b38316">shadowsocks2</a></li>
</ul>
</li>
<li><a href="#orge331f4c">FQA</a>
<ul>
<li><a href="#org4f2a3ea">正向代理和反向代理?</a></li>
</ul>
</li>
<li><a href="#orgd9b2915">Idea</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgd30366b" class="outline-2">
<h2 id="orgd30366b">Information</h2>
<div class="outline-text-2" id="text-orgd30366b">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">网站</th>
<th scope="col" class="org-left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><a href="http://www.caict.ac.cn/">http://www.caict.ac.cn/</a></td>
<td class="org-left">中国信通院,国家高端专业智库 产业创新发展平台</td>
</tr>

<tr>
<td class="org-left"><a href="https://csrc.nist.gov/">https://csrc.nist.gov/</a></td>
<td class="org-left">美国国家标准与技术研究院,计算机安全资源中心</td>
</tr>

<tr>
<td class="org-left"><a href="http://www.brendangregg.com/">http://www.brendangregg.com/</a></td>
<td class="org-left">系统性能分析</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org32cf18a" class="outline-2">
<h2 id="org32cf18a">Computer</h2>
<div class="outline-text-2" id="text-org32cf18a">
</div>
<div id="outline-container-org082e43c" class="outline-3">
<h3 id="org082e43c">CPU</h3>
<div class="outline-text-3" id="text-org082e43c">
<p>
中央处理器 （英语：Central Processing Unit，缩写：CPU），是计算机的主要设备之一，功能主要是解释计算机指令以及处理计算机软件中的数据。计算机的可编程性主要是指对中央处理器的编程。
</p>
</div>
</div>
<div id="outline-container-org810dceb" class="outline-3">
<h3 id="org810dceb">GPU</h3>
<div class="outline-text-3" id="text-org810dceb">
<p>
图形处理器（英语：graphics processing unit，缩写：GPU），又称显示核心、视觉处理器、显示芯片或绘图芯片，是一种专门在个人计算机、工作站、游戏机和一些移动设备（如平板电脑、智能手机等）上运行绘图运算工作的微处理器。
</p>
</div>
</div>
<div id="outline-container-org4325c2d" class="outline-3">
<h3 id="org4325c2d">CPU/GPU AI</h3>
<div class="outline-text-3" id="text-org4325c2d">
<p>
在 AI 中需要处理大量的数据,而根据这些数据的特点,GPU 的速度要远远快于 CPU,从而 GPU 的发展在 AI 的推动下会更快的发展.
</p>
</div>
</div>
<div id="outline-container-orgc67c793" class="outline-3">
<h3 id="orgc67c793">参考</h3>
<div class="outline-text-3" id="text-orgc67c793">
<ol class="org-ol">
<li><a href="https://zh.wikipedia.org/wiki/%E4%B8%AD%E5%A4%AE%E5%A4%84%E7%90%86%E5%99%A8">中央处理器</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E5%9C%96%E5%BD%A2%E8%99%95%E7%90%86%E5%99%A8">图形处理器</a></li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org0413622" class="outline-2">
<h2 id="org0413622">DNS</h2>
<div class="outline-text-2" id="text-org0413622">
</div>
<div id="outline-container-org897a4a0" class="outline-3">
<h3 id="org897a4a0">通配符域名</h3>
</div>
<div id="outline-container-orgf253ccf" class="outline-3">
<h3 id="orgf253ccf">参考</h3>
<div class="outline-text-3" id="text-orgf253ccf">
<ol class="org-ol">
<li><a href="https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F">域名系统</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E6%A0%B9%E7%B6%B2%E5%9F%9F%E5%90%8D%E7%A8%B1%E4%BC%BA%E6%9C%8D%E5%99%A8">根域名服务器</a></li>
<li><a href="https://en.wikipedia.org/wiki/Wildcard_DNS_record">Wildcard DNS record</a></li>
<li><a href="https://en.wikipedia.org/wiki/Domain_Name_System">Domain Name System</a></li>
<li><a href="https://www.rfc-editor.org/rfc/rfc4592.txt">The Role of Wildcards in the Domain Name System</a></li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org080d188" class="outline-2">
<h2 id="org080d188">Docker</h2>
<div class="outline-text-2" id="text-org080d188">
</div>
<div id="outline-container-orgcc35889" class="outline-3">
<h3 id="orgcc35889">ubuntu 安装</h3>
<div class="outline-text-3" id="text-orgcc35889">
<p>
<a href="https://docs.docker.com/">https://docs.docker.com/</a>
</p>

<p>
<a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/">https://docs.docker.com/install/linux/docker-ce/ubuntu/</a>
</p>

<p>
Ubuntu18.04 安装 docker
</p>
<div class="org-src-container">
<pre class="src src-shell">sudo apt-get remove docker docker-engine docker.io
sudo apt-get update
sudo apt-get install <span style="color: #2aa198;">\</span>
    apt-transport-https <span style="color: #2aa198;">\</span>
    ca-certificates <span style="color: #2aa198;">\</span>
    curl <span style="color: #2aa198;">\</span>
    software-properties-common
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
sudo apt-key fingerprint <span style="color: #d75fd7;">0EBFCD88</span>
sudo add-apt-repository <span style="color: #2aa198;">\</span>
   <span style="color: #2aa198;">"deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span>
<span style="color: #2aa198;">   $(</span><span style="color: #fa8072;">lsb_release</span><span style="color: #2aa198;"> -cs) \</span>
<span style="color: #2aa198;">   stable"</span>
sudo apt-get update
sudo apt-get install docker-ce
</pre>
</div>
</div>
</div>
<div id="outline-container-org8236f2b" class="outline-3">
<h3 id="org8236f2b">centos 安装</h3>
<div class="outline-text-3" id="text-org8236f2b">
<p>
<a href="https://docs.docker.com/install/linux/docker-ce/centos/#install-docker-ce">https://docs.docker.com/install/linux/docker-ce/centos/#install-docker-ce</a>
</p>
<div class="org-src-container">
<pre class="src src-shell">sudo yum install -y yum-utils <span style="color: #2aa198;">\</span>
  device-mapper-persistent-data <span style="color: #2aa198;">\</span>
  lvm2
sudo yum-config-manager <span style="color: #2aa198;">\</span>
    --add-repo <span style="color: #2aa198;">\</span>
    https://download.docker.com/linux/centos/docker-ce.repo
sudo yum install docker-ce
sudo systemctl enable docker
sudo systemctl start docker
</pre>
</div>
</div>
</div>

<div id="outline-container-org4127e8a" class="outline-3">
<h3 id="org4127e8a">使用</h3>
<div class="outline-text-3" id="text-org4127e8a">
</div>
<div id="outline-container-orge03ccba" class="outline-4">
<h4 id="orge03ccba">给运行中容器增加端口映射</h4>
<div class="outline-text-4" id="text-orge03ccba">
<p>
<a href="http://yaxin-cn.github.io/Docker/expose-port-of-running-docker-container.html">http://yaxin-cn.github.io/Docker/expose-port-of-running-docker-container.html</a>
</p>

<div class="org-src-container">
<pre class="src src-shell">iptables -A DOCKER ! -i docker0 -o docker0 -p tcp --dport <span style="color: #d75fd7;">27017</span> -d <span style="color: #d75fd7;">172.17.0.2</span> -j ACCEPT
iptables -t nat -A POSTROUTING -p tcp --dport <span style="color: #d75fd7;">27017</span> -s <span style="color: #d75fd7;">172.17.0.2</span> -d <span style="color: #d75fd7;">172.17.0.2</span> -j MASQUERADE
iptables -t nat -A DOCKER ! -i dokcer0 -p tcp --dport <span style="color: #d75fd7;">27017</span> -j DNAT --to-destination <span style="color: #d75fd7;">172.17.0.2:27017</span>
</pre>
</div>

<p>
docker run &#x2013;link 说明
</p>

<p>
<a href="https://www.jianshu.com/p/21d66ca6115e">https://www.jianshu.com/p/21d66ca6115e</a>
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org4db73d3" class="outline-2">
<h2 id="org4db73d3">ETCD</h2>
<div class="outline-text-2" id="text-org4db73d3">
</div>
<div id="outline-container-orgeedfe4a" class="outline-3">
<h3 id="orgeedfe4a">每次访问 etcd 都会重定向到外网</h3>
<div class="outline-text-3" id="text-orgeedfe4a">
<p>
<code>--advertise-client-urls</code> 外界访问当前的 url 都是通过这个参数配置的,只有出现在这个参数上的值才会被外界访问,和实际 listen 的不完全对等
</p>
</div>
</div>
<div id="outline-container-org2e79cfe" class="outline-3">
<h3 id="org2e79cfe">v2.3.4 etcdctl unexpected status code 401</h3>
<div class="outline-text-3" id="text-org2e79cfe">
<p>
这个可以打开 debug,基本上是没有权限的
</p>
</div>
</div>
<div id="outline-container-orga61db3a" class="outline-3">
<h3 id="orga61db3a">root 用户, root/guest 角色</h3>
<div class="outline-text-3" id="text-orga61db3a">
<ul class="org-ul">
<li>root 用户,在启动安全模式的时是必须的创建的,而且会被授予 root 角色</li>
<li>root 角色有所有权限</li>
<li>guest 没有提供认证信息的请求有那些权限</li>
</ul>
</div>
</div>
<div id="outline-container-org10979b4" class="outline-3">
<h3 id="org10979b4">参考</h3>
<div class="outline-text-3" id="text-org10979b4">
<ol class="org-ol">
<li><a href="https://doczhcn.gitbook.io/etcd/index/index-1/clustering">搭建 etcd 集群</a></li>
<li><a href="https://coreos.com/etcd/docs/latest/v2/authentication.html">Authentication Guide</a></li>
</ol>
</div>
</div>
</div>
<div id="outline-container-orgbdba92e" class="outline-2">
<h2 id="orgbdba92e">Linux</h2>
<div class="outline-text-2" id="text-orgbdba92e">
</div>
<div id="outline-container-orgc430a2c" class="outline-3">
<h3 id="orgc430a2c">ab(apache bench)</h3>
<div class="outline-text-3" id="text-orgc430a2c">
</div>
<div id="outline-container-org4f8ce45" class="outline-4">
<h4 id="org4f8ce45">介绍</h4>
<div class="outline-text-4" id="text-org4f8ce45">
<p>
HTTP 服务性能测试工具
</p>
</div>
</div>
</div>
<div id="outline-container-orge8edd2d" class="outline-3">
<h3 id="orge8edd2d">awk</h3>
<div class="outline-text-3" id="text-orge8edd2d">
</div>
<div id="outline-container-orge5798be" class="outline-4">
<h4 id="orge5798be">输出满足条件的行</h4>
<div class="outline-text-4" id="text-orge5798be">
<div class="org-src-container">
<pre class="src src-shell">awk <span style="color: #2aa198;">'{if ($1 &gt; 10) print $0}'</span> filename
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">input</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">1 hello</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">2 world</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">100 who are you</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">output</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">100 who are you</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgad11c24" class="outline-4">
<h4 id="orgad11c24">printf</h4>
<div class="outline-text-4" id="text-orgad11c24">
<div class="org-src-container">
<pre class="src src-shell">awk -F , <span style="color: #2aa198;">'{printf "|%s|%s|%s|\n", $2,$4,$5}'</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org3467f36" class="outline-3">
<h3 id="org3467f36">boot</h3>
<div class="outline-text-3" id="text-org3467f36">
</div>
<div id="outline-container-org6fca777" class="outline-4">
<h4 id="org6fca777">清理 boot 分区</h4>
<div class="outline-text-4" id="text-org6fca777">
</div>
<ul class="org-ul">
<li><a id="orga28d262"></a>ubuntu18.04<br />
<div class="outline-text-5" id="text-orga28d262">
<div class="org-src-container">
<pre class="src src-shell">dpkg --get-selections|grep linux-image
uname -a
sudo apt-get purge  &#20869;&#26680;&#21517;&#31216;
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#30452;&#25509;&#36816;&#34892;&#20197;&#19979;&#33050;&#26412;&#23601;&#21487;&#20197;&#20102;</span>
dpkg --get-selections| grep linux-image | grep deinstall | awk <span style="color: #2aa198;">'{print $1}'</span> | xargs apt-get purge -y
</pre>
</div>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgcc44904" class="outline-3">
<h3 id="orgcc44904">cgroup</h3>
<div class="outline-text-3" id="text-orgcc44904">
</div>
<div id="outline-container-org03ed592" class="outline-4">
<h4 id="org03ed592">cpu</h4>
<div class="outline-text-4" id="text-org03ed592">
<pre class="example">
cgroup.clone_children
cgroup.event_control
cgroup.procs
cpuacct.stat
cpuacct.usage
cpuacct.usage_percpu
# 时间周期长度
cpu.cfs_period_us
# 在当前 cgroup 在设置的周期长度内所能使用的 cpu 时间数
cpu.cfs_quota_us
cpu.rt_period_us
cpu.rt_runtime_us
# cpu 的相对值
cpu.shares
# cpu 统计值
cpu.stat
notify_on_release
tasks
</pre>
</div>
</div>
<div id="outline-container-orge8f17c1" class="outline-4">
<h4 id="orge8f17c1">memory</h4>
<div class="outline-text-4" id="text-orge8f17c1">
<pre class="example">
 cgroup.clone_children 
cgroup.event_control
# 进程 id
cgroup.procs
# 线程 id
tasks
# 内存使用量达到上限值的次数
memory.failcnt 
# 触发系统尽可能回收当前 cgroup 可以回收的内存
memory.force_empty
# 限制内存的大小
memory.limit_in_bytes 
# 历史内存最大使用量
memory.max_usage_in_bytes 
memory.move_charge_at_immigrate
memory.numa_stat
memory.oom_control
memory.pressure_level
# 当前限制的内存软额度,当系统内存吃紧时,会回收超过 soft limit 的内存
memory.soft_limit_in_bytes
# 当前内存使用情况
memory.stat 
memory.swappiness
# 当前已使用内存
memory.usage_in_bytes
# 是否将子 cgroup 的使用情况统计到当前 cgroup 中
memory.use_hierarchy
notify_on_release
# memsw
memory.memsw.failcnt 
memory.memsw.limit_in_bytes
memory.memsw.max_usage_in_bytes
memory.memsw.usage_in_bytes
# kmem
memory.kmem.failcnt
memory.kmem.limit_in_bytes
memory.kmem.max_usage_in_bytes 
memory.kmem.slabinfo
memory.kmem.tcp.failcnt
memory.kmem.tcp.limit_in_bytes
memory.kmem.tcp.max_usage_in_bytes
memory.kmem.tcp.usage_in_bytes
memory.kmem.usage_in_bytes
</pre>
</div>
</div>
<div id="outline-container-org8eb6b32" class="outline-4">
<h4 id="org8eb6b32">参考</h4>
<div class="outline-text-4" id="text-org8eb6b32">
<ol class="org-ol">
<li><a href="https://segmentfault.com/a/1190000008125359">Linux Cgroup 系列（04）：限制 cgroup 的内存使用（subsystem 之 memory）</a></li>
<li><a href="https://segmentfault.com/a/1190000008323952">Linux Cgroup 系列（05）：限制 cgroup 的 CPU 使用（subsystem 之 cpu）</a></li>
</ol>
</div>
</div>
</div>
<div id="outline-container-orgf70d328" class="outline-3">
<h3 id="orgf70d328">crontab</h3>
<div class="outline-text-3" id="text-orgf70d328">
</div>
<div id="outline-container-orgc63313e" class="outline-4">
<h4 id="orgc63313e">简介</h4>
<div class="outline-text-4" id="text-orgc63313e">
<p>
主要是 linux 用来做定时任务,可以具体的分钟/小时/天/月/周
</p>
</div>
</div>
<div id="outline-container-orge521a49" class="outline-4">
<h4 id="orge521a49">使用</h4>
<div class="outline-text-4" id="text-orge521a49">
</div>
<ul class="org-ul">
<li><a id="orgd2e4a03"></a>说明<br />
<div class="outline-text-5" id="text-orgd2e4a03">
<pre class="example">
usage:	crontab [-u user] file
  crontab [ -u user ] [ -i ] { -e | -l | -r }
    (default operation is replace, per 1003.2)
  -e	(edit user's crontab)
  -l	(list user's crontab)
  -r	(delete user's crontab)
  -i	(prompt before deleting user's crontab)
</pre>
</div>
</li>
<li><a id="org33323f4"></a>备份<br />
<div class="outline-text-5" id="text-org33323f4">
<pre class="example">
crontab -l &gt; crontab.bak
</pre>
</div>
</li>
<li><a id="orga853850"></a>恢复<br />
<div class="outline-text-5" id="text-orga853850">
<pre class="example">
crontab filename
</pre>
</div>
</li>
<li><a id="org0ee6a1d"></a>删除<br />
<div class="outline-text-5" id="text-org0ee6a1d">
<pre class="example">
crontab -r
</pre>
</div>
</li>
<li><a id="org99408f3"></a>列出<br />
<div class="outline-text-5" id="text-org99408f3">
<pre class="example">
crontab -l
</pre>
</div>
</li>
<li><a id="orgff4881b"></a>编辑<br />
<div class="outline-text-5" id="text-orgff4881b">
<pre class="example">
crontab -e
</pre>
</div>
</li>
<li><a id="org1e3f273"></a>间隔 2 分钟执行一次<br />
<div class="outline-text-5" id="text-org1e3f273">
<pre class="example">
# Edit this file to introduce tasks to be run by cron.
#
# Each task to run has to be defined through a single line
# indicating with different fields when the task will be run
# and what command to run for the task
#
# To define the time you can provide concrete values for
# minute (m), hour (h), day of month (dom), month (mon),
# and day of week (dow) or use '*' in these fields (for 'any').#
# Notice that tasks will be started based on the cron's system
# daemon's notion of time and timezones.
#
# Output of the crontab jobs (including errors) is sent through
# email to the user the crontab file belongs to (unless redirected).
#
# For example, you can run a backup of all your user accounts
# at 5 a.m every week with:
# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/
#
# For more information see the manual pages of crontab(5) and cron(8)
#
# m h  dom mon dow   command

*/2 * * * * command
</pre>
</div>
</li>
<li><a id="org7f526af"></a>间隔 5 小时执行一次<br />
<div class="outline-text-5" id="text-org7f526af">
<pre class="example">
* */5 * * * command     
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-org6b4aae6" class="outline-3">
<h3 id="org6b4aae6">mtr</h3>
<div class="outline-text-3" id="text-org6b4aae6">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#20998;&#26512;&#21040;&#36798;&#29305;&#23450;&#20027;&#26426;&#30340;&#32593;&#32476;&#24773;&#20917;</span>
mtr -r <span style="color: #d75fd7;">8.8.8.8</span>
<span style="color: #008787; background-color: #262626;"># </span><span style="color: #008787; background-color: #262626;">&#27979;&#35797;&#21040;&#20027;&#26426;&#26576;&#20010; TCP &#30417;&#21548;&#31471;&#21475;&#30340;&#32593;&#32476;&#24773;&#20917;</span>
mtr --tcp --port <span style="color: #d75fd7;">8888</span> -r <span style="color: #d75fd7;">8.8.8.8</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org7d986ae" class="outline-3">
<h3 id="org7d986ae">FQA</h3>
<div class="outline-text-3" id="text-org7d986ae">
</div>
<div id="outline-container-orgce4a3a9" class="outline-4">
<h4 id="orgce4a3a9">进程内存占用分析</h4>
</div>
<div id="outline-container-org56fc9dd" class="outline-4">
<h4 id="org56fc9dd">ubuntu18.04 无法开启 AP 热点</h4>
<div class="outline-text-4" id="text-org56fc9dd">
<p>
<a href="http://ubuntuhandbook.org/index.php/2014/09/wifi-hotspot-access-point-not-supported/">文章</a>
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org516fb14" class="outline-2">
<h2 id="org516fb14">Performance</h2>
<div class="outline-text-2" id="text-org516fb14">
</div>
<div id="outline-container-org21ae6d8" class="outline-3">
<h3 id="org21ae6d8">cpu</h3>
</div>
</div>
<div id="outline-container-org8e39164" class="outline-2">
<h2 id="org8e39164">Physics</h2>
<div class="outline-text-2" id="text-org8e39164">
</div>
<div id="outline-container-org7a749b4" class="outline-3">
<h3 id="org7a749b4">Stellarium</h3>
<div class="outline-text-3" id="text-org7a749b4">
<p>
<a href="https://stellarium.org/zh_CN/">Stellarium</a> 是一款开源的天象模拟软件。它以 3D 形式展示了极为逼真的星空，就像你在真实世界使用裸眼，双筒望远镜或天文望远镜看到的一样。
</p>
</div>
</div>
</div>
<div id="outline-container-org7a738e7" class="outline-2">
<h2 id="org7a738e7">Nginx</h2>
<div class="outline-text-2" id="text-org7a738e7">
</div>
<div id="outline-container-org3bf8422" class="outline-3">
<h3 id="org3bf8422">FQA</h3>
<div class="outline-text-3" id="text-org3bf8422">
</div>
<div id="outline-container-org4c77e91" class="outline-4">
<h4 id="org4c77e91">worker<sub>connections</sub> are not enough while connecting to upstream</h4>
<div class="outline-text-4" id="text-org4c77e91">
<p>
<a href="http://nginx.org/en/docs/ngx_core_module.html#worker_connections">官方文档</a> 直接调整 worker 的连接数即可,这里的连接数是 nginx 的连接总数
</p>
<pre class="example">
events {
    worker_connections  1024;
}
</pre>
<p>
调整为期望大小,不过这个值调整后可能会遇到下面问题
</p>
<pre class="example">
events {
    worker_connections  10000;
}
</pre>
<p>
修改完配置文件后
</p>
<pre class="example">
# 测试配置文件
nginx -t 
# 重载配置
nginx -s reload
</pre>
</div>
</div>
<div id="outline-container-orgab21431" class="outline-4">
<h4 id="orgab21431">10000 worker<sub>connections</sub> exceed open file resource limit: 1024</h4>
<div class="outline-text-4" id="text-orgab21431">
<p>
<a href="http://nginx.org/en/docs/ngx_core_module.html#worker_rlimit_nofile">官方文档</a> 这个问题主要是因为 nginx 支持的打开文件数量为 1024,但配置的最大连接数为 10000,可以通过在 nginx 中增加以下配置
</p>
<pre class="example">
worker_rlimit_nofile 10000;
</pre>
<p>
修改完配置文件后
</p>
<pre class="example">
# 测试配置文件
nginx -t 
# 重载配置
nginx -s reload
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org8fb7eed" class="outline-2">
<h2 id="org8fb7eed">Redis</h2>
<div class="outline-text-2" id="text-org8fb7eed">
</div>
<div id="outline-container-orgb4c76c6" class="outline-3">
<h3 id="orgb4c76c6">FQA</h3>
<div class="outline-text-3" id="text-orgb4c76c6">
</div>
<div id="outline-container-org63d8215" class="outline-4">
<h4 id="org63d8215">aof 和 rdb 同时开启,redis 重启加载哪个文件?</h4>
<div class="outline-text-4" id="text-org63d8215">
<blockquote>
<p>
<a href="https://redis.io/topics/persistence#redis-persistence">https://redis.io/topics/persistence#redis-persistence</a>
</p>

<p>
It is possible to combine both AOF and RDB in the same instance. Notice that, in this case, when Redis restarts the AOF file will be used to reconstruct the original dataset since it is guaranteed to be the most complete.    
</p>
</blockquote>
<p>
aof 文件
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org61f9d8c" class="outline-2">
<h2 id="org61f9d8c">Cryptography</h2>
<div class="outline-text-2" id="text-org61f9d8c">
</div>
<div id="outline-container-org9eb90d9" class="outline-3">
<h3 id="org9eb90d9">FQA</h3>
<div class="outline-text-3" id="text-org9eb90d9">
</div>
<div id="outline-container-org0e29cfa" class="outline-4">
<h4 id="org0e29cfa">PCKS#5 和 PCKS#7 的区别</h4>
<div class="outline-text-4" id="text-org0e29cfa">
<p>
根据<a href="https://en.wikipedia.org/wiki/Padding_(cryptography)#PKCS%235_and_PKCS%237">Padding</a>描述,PCKS#5 和 PCKS#7 原理相同,只是 PCKS#5 当时定义的块大小为 64 比特 
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org9ddc9fa" class="outline-2">
<h2 id="org9ddc9fa">Proxy</h2>
<div class="outline-text-2" id="text-org9ddc9fa">
</div>
<div id="outline-container-orgc97e46e" class="outline-3">
<h3 id="orgc97e46e">redsocks</h3>
<div class="outline-text-3" id="text-orgc97e46e">
</div>
<div id="outline-container-org698f8c4" class="outline-4">
<h4 id="org698f8c4">profile</h4>
<div class="outline-text-4" id="text-org698f8c4">
<p>
<a href="https://github.com/semigodking/redsocks">code</a>
</p>
</div>
</div>
<div id="outline-container-org43465b3" class="outline-4">
<h4 id="org43465b3">usage</h4>
<div class="outline-text-4" id="text-org43465b3">
<p>
<a href="https://hub.docker.com/r/haormj/redsocks">docker</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org03de835" class="outline-3">
<h3 id="org03de835">kcptun</h3>
<div class="outline-text-3" id="text-org03de835">
</div>
<div id="outline-container-orgb9cc2cb" class="outline-4">
<h4 id="orgb9cc2cb">profile</h4>
<div class="outline-text-4" id="text-orgb9cc2cb">
<p>
<a href="https://github.com/xtaci/kcptun">code</a>
</p>
</div>
</div>
<div id="outline-container-org0ebda8e" class="outline-4">
<h4 id="org0ebda8e">server</h4>
<div class="outline-text-4" id="text-org0ebda8e">
<pre class="example">
[Unit]
Description=Kcptun Server Service
After=storage.service
After=network.target

[Service]
LimitNOFILE=65536
LimitNPROC=65536
Type=simple
WorkingDirectory=/opt/kcptun 
ExecStart=/opt/kcptun/server_linux_amd64 \
  -t "127.0.0.1:15789" \
  -l ":28796" \
  --key "it's a secrect" \
  -mode fast3 \
  -nocomp \
  -sockbuf 16777217 \
  -dscp 46 
MemoryLimit=2G

Restart=on-failure
RestartSec=2s

[Install]
WantedBy=multi-user.target 
</pre>
</div>
</div>
<div id="outline-container-orgeda88f8" class="outline-4">
<h4 id="orgeda88f8">client</h4>
<div class="outline-text-4" id="text-orgeda88f8">
<pre class="example">
[Unit]
Description=Kcptun Client Service
After=storage.service
After=network.target

[Service]
LimitNOFILE=65536
LimitNPROC=65536
Type=simple
WorkingDirectory=/opt/kcptun 
ExecStart=/opt/kcptun/client_linux_amd64 \
  -r "x.x.x.x:28796" \
  -l ":15789" \
  --key "it's a secrect" \
  -mode fast3 \
  -nocomp \
  -autoexpire 900 \
  -sockbuf 16777217 \
  -dscp 46

MemoryLimit=2G

Restart=on-failure
RestartSec=2s

[Install]
WantedBy=multi-user.target 
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf183f83" class="outline-3">
<h3 id="orgf183f83">shadowsocks</h3>
<div class="outline-text-3" id="text-orgf183f83">
</div>
<div id="outline-container-org0b4559a" class="outline-4">
<h4 id="org0b4559a">profile</h4>
<div class="outline-text-4" id="text-org0b4559a">
<p>
<a href="https://github.com/shadowsocks/shadowsocks-go">code</a>
</p>
</div>
</div>
<div id="outline-container-org7586e9a" class="outline-4">
<h4 id="org7586e9a">server</h4>
<div class="outline-text-4" id="text-org7586e9a">
<pre class="example">
[Unit]
Description=Shadowsocks
After=storage.service
After=network.target

[Service]
LimitNOFILE=65536
LimitNPROC=65536
Type=simple
WorkingDirectory=/opt/shadowsocks
ExecStart=/opt/shadowsocks/shadowsocks-server -u

Restart=on-failure
RestartSec=2s

[Install]
WantedBy=multi-user.target    
</pre>
</div>
</div>
<div id="outline-container-orgcb72dd8" class="outline-4">
<h4 id="orgcb72dd8">client</h4>
<div class="outline-text-4" id="text-orgcb72dd8">
<pre class="example">
[Unit]
Description=Shadowsocks
After=storage.service
After=network.target

[Service]
LimitNOFILE=65536
LimitNPROC=65536
Type=simple
WorkingDirectory=/opt/shadowsocks
ExecStart=/opt/shadowsocks/shadowsocks-local

Restart=on-failure
RestartSec=2s

[Install]
WantedBy=multi-user.target    
</pre>
</div>
</div>
</div>
<div id="outline-container-org7b38316" class="outline-3">
<h3 id="org7b38316">shadowsocks2</h3>
<div class="outline-text-3" id="text-org7b38316">
</div>
<div id="outline-container-org89693b9" class="outline-4">
<h4 id="org89693b9">profile</h4>
<div class="outline-text-4" id="text-org89693b9">
<p>
<a href="https://github.com/shadowsocks/go-shadowsocks2">code</a> 
</p>
</div>
</div>
<div id="outline-container-orgdd358e7" class="outline-4">
<h4 id="orgdd358e7">server</h4>
<div class="outline-text-4" id="text-orgdd358e7">
<pre class="example">
[Unit]
Description=Shadowsocks2
After=storage.service
After=network.target

[Service]
LimitNOFILE=65536
LimitNPROC=65536
Type=simple
WorkingDirectory=/opt/shadowsocks2
ExecStart=/opt/shadowsocks2/shadowsocks2 \
  -s 'ss://AEAD_CHACHA20_POLY1305:your-password@:23586' \
  -verbose

Restart=on-failure
RestartSec=2s

[Install]
WantedBy=multi-user.target      
</pre>
</div>
</div>
<div id="outline-container-org8071157" class="outline-4">
<h4 id="org8071157">client</h4>
<div class="outline-text-4" id="text-org8071157">
<pre class="example">
[Unit]
Description=Shadowsocks2
After=storage.service
After=network.target

[Service]
LimitNOFILE=65536
LimitNPROC=65536
Type=simple
WorkingDirectory=/opt/shadowsocks2
ExecStart=/opt/shadowsocks2/shadowsocks2 \
 -c 'ss://AEAD_CHACHA20_POLY1305:your-password@[server_address]:23586' \
 -verbose \
 -socks :1080 \
 -redir :12345 \ 
 -u \
 -udptun :8053=8.8.8.8:53,:8054=8.8.4.4:53 \
 -tcptun :8053=8.8.8.8:53,:8054=8.8.4.4:53

Restart=on-failure
RestartSec=2s

[Install]
WantedBy=multi-user.target     
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orge331f4c" class="outline-2">
<h2 id="orge331f4c">FQA</h2>
<div class="outline-text-2" id="text-orge331f4c">
</div>
<div id="outline-container-org4f2a3ea" class="outline-3">
<h3 id="org4f2a3ea">正向代理和反向代理?</h3>
<div class="outline-text-3" id="text-org4f2a3ea">
<ul class="org-ul">
<li>正向代理: 客户端通过代理访问服务器, 由客户端发起</li>
<li>反向代理: 服务器配置代理,让客户端通过代理访问,由服务器发起</li>
</ul>
<p>
举例: 房客/中介/房东
</p>
<ul class="org-ul">
<li>正向代理: 房客-&gt;中介-&gt;房东,房客主动找中介</li>
<li>反向代理: 房客-&gt;中介&lt;-房东,房东主动找中介</li>
</ul>
<p>
主要是主体不同,不要太过于纠结,名字而已,都称为代理也行!
</p>
</div>
</div>
</div>
<div id="outline-container-orgd9b2915" class="outline-2">
<h2 id="orgd9b2915">Idea</h2>
<div class="outline-text-2" id="text-orgd9b2915">
<ol class="org-ol">
<li>盲目创新的背后是无知</li>
</ol>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Ward Harris</p>
<p class="date">Created: 2019-06-14 五 09:51</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
